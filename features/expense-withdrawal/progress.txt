---
Story: WDR-001 Add withdrawal status values to ExpenseStatus enum
Files changed: prisma/schema.prisma, prisma/migrations/20260114084535_add_withdrawal_statuses/migration.sql
Notes: Added WITHDRAWAL_REQUESTED, WITHDRAWAL_APPROVED, and RECEIVED values to ExpenseStatus enum.
---

---
Story: WDR-002 Add WithdrawalApproval model to schema
Files changed: prisma/schema.prisma, prisma/migrations/20260114084652_add_withdrawal_approval_model/migration.sql
Notes: Added WithdrawalApproval model with relations to Expense and User. Added unique constraint on [expenseId, userId].
---

---
Story: WDR-003 Create POST /api/expenses/[id]/request-withdrawal endpoint
Files changed: src/app/api/expenses/[id]/request-withdrawal/route.ts
Notes: Created endpoint with validation for auth, expense exists, owner check, and APPROVED status check.
---

---
Story: WDR-004 Auto-approve withdrawal for single founder teams
Files changed: src/app/api/expenses/[id]/request-withdrawal/route.ts
Notes: Added founder count check. If no other founders, status goes directly to WITHDRAWAL_APPROVED. Response includes autoApproved boolean.
---

---
Story: WDR-005 Create POST /api/expenses/[id]/approve-withdrawal endpoint
Files changed: src/app/api/expenses/[id]/approve-withdrawal/route.ts
Notes: Created endpoint with validation for auth, founder role, expense exists, not owner, not already approved, WITHDRAWAL_REQUESTED status.
---

---
Story: WDR-006 Auto-complete withdrawal when all founders approve
Files changed: src/app/api/expenses/[id]/approve-withdrawal/route.ts
Notes: Added logic to check if all founders (except owner) have approved. Status changes to WITHDRAWAL_APPROVED when complete. Response includes isFullyApproved boolean.
---

---
Story: WDR-007 Create POST /api/expenses/[id]/confirm-receipt endpoint
Files changed: src/app/api/expenses/[id]/confirm-receipt/route.ts
Notes: Created endpoint with validation for auth, expense exists, owner check, and WITHDRAWAL_APPROVED status. Updates status to RECEIVED.
---

---
Story: WDR-008 Update GET /api/expenses to include withdrawal info
Files changed: src/app/api/expenses/route.ts
Notes: Added withdrawalApprovals to include, added withdrawalApprovalsNeeded and canCurrentUserApproveWithdrawal computed fields.
---

---
Story: WDR-009 Update src/lib/validations/expense.ts for withdrawal statuses
Files changed: src/lib/validations/expense.ts
Notes: Added WITHDRAWAL_REQUESTED, WITHDRAWAL_APPROVED, and RECEIVED to ExpenseStatus enum.
---

---
Story: WDR-010 Create unit tests for withdrawal API endpoints
Files changed: tests/unit/api/withdrawal.test.ts
Notes: Created 18 tests covering request-withdrawal, approve-withdrawal, and confirm-receipt endpoints. All 89 tests pass.
---

---
Story: WDR-011 Create useRequestWithdrawal hook
Files changed: src/hooks/useRequestWithdrawal.ts
Notes: Created hook following same pattern as useApproveExpense. Includes auto-approval handling in toast messages.
---

---
Story: WDR-012 Create useApproveWithdrawal hook
Files changed: src/hooks/useApproveWithdrawal.ts
Notes: Created hook with isFullyApproved handling in toast messages.
---

---
Story: WDR-013 Create useConfirmReceipt hook
Files changed: src/hooks/useConfirmReceipt.ts
Notes: Created hook for confirming receipt of funds.
---

---
Story: WDR-014 Update useExpenses hook for withdrawal fields
Files changed: src/hooks/useExpenses.ts
Notes: Added WithdrawalApproval interface, added withdrawal statuses to Expense status type, added withdrawalApprovals, withdrawalApprovalsNeeded, and canCurrentUserApproveWithdrawal fields.
---

---
Story: WDR-015 Create WithdrawalStatusBadge component
Files changed: src/components/expenses/withdrawal-status-badge.tsx
Notes: Created badge with warning colors for requested, info colors for ready for receipt, success colors for received. Shows approval progress.
---

---
Story: WDR-016 Create RequestWithdrawalButton component
Files changed: src/components/expenses/request-withdrawal-button.tsx
Notes: Created button with AlertDialog confirmation. Hidden when not owner or not APPROVED status.
---

---
Story: WDR-017 Create ApproveWithdrawalButton component
Files changed: src/components/expenses/approve-withdrawal-button.tsx
Notes: Created button hidden for owners, disabled when already approved, hidden when not WITHDRAWAL_REQUESTED.
---

---
Story: WDR-018 Create ConfirmReceiptButton component
Files changed: src/components/expenses/confirm-receipt-button.tsx
Notes: Created button with AlertDialog confirmation. Only shows for owner when WITHDRAWAL_APPROVED.
---

---
Story: WDR-019 Update ApprovalStatusBadge for withdrawal states
Files changed: src/components/expenses/approval-status-badge.tsx
Notes: Extended interface and component to handle WITHDRAWAL_REQUESTED (warning), WITHDRAWAL_APPROVED (info), and RECEIVED (success) states.
---
